<h1>Invoice #<%= @invoice.id %></h1>
<p>Status: <%= @invoice.status %></p>
<p>Created at: <%= @invoice.created_at.strftime("%A, %B%e, %Y") %></p>
<p>Customer: <%= @invoice.customer.first_name %> <%= @invoice.customer.last_name %></p>

<p>Total Revenue: <%= @invoice.total_revenue %></p>

<h2>Items</h2>

<% @invoice.items.each do |item| %>
    <% invoice_item = item.invoice_item_by_invoice(@invoice) %>
    
    <ul>
        <li>Item: <%= item.name %> Quantity: <%= invoice_item.quantity %> Price: <%= invoice_item.unit_price %> Status: <%= invoice_item.status %></li>
    </ul>
<% end %>

<%= form_with model: @invoice, url: admin_invoice_path, local: true do |form| %>
    <%= form.select :status, ['in progress', 'cancelled', 'completed'] %>
    <%= form.submit 'Update Invoice Status' %>
<% end %>